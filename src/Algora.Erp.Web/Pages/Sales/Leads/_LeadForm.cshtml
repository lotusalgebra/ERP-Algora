@model Algora.Erp.Web.Pages.Sales.Leads.LeadFormViewModel
@using Algora.Erp.Domain.Entities.Sales

<form hx-post="/Sales/Leads" hx-target="#leadsTableBody" hx-swap="innerHTML">
    <div class="modal-header">
        <h5 class="modal-title">@(Model.IsEdit ? "Edit Lead" : "New Lead")</h5>
        <button type="button" class="btn-close" data-modal-hide="leadModal"></button>
    </div>
    <div class="modal-body">
        @if (Model.IsEdit)
        {
            <input type="hidden" name="Id" value="@Model.Lead?.Id" />
        }

        <div class="row g-3">
            <div class="col-md-6">
                <label class="form-label">Name <span class="text-danger">*</span></label>
                <input type="text" name="Name" class="form-control" value="@Model.Lead?.Name" required />
            </div>
            <div class="col-md-6">
                <label class="form-label">Company</label>
                <input type="text" name="Company" class="form-control" value="@Model.Lead?.Company" />
            </div>
            <div class="col-md-6">
                <label class="form-label">Email</label>
                <input type="email" name="Email" class="form-control" value="@Model.Lead?.Email" />
            </div>
            <div class="col-md-6">
                <label class="form-label">Phone</label>
                <input type="text" name="Phone" class="form-control" value="@Model.Lead?.Phone" />
            </div>
            <div class="col-md-6">
                <label class="form-label">Source</label>
                <select name="Source" class="form-select">
                    @foreach (LeadSource s in Enum.GetValues(typeof(LeadSource)))
                    {
                        <option value="@s" selected="@(Model.Lead?.Source == s)">@s</option>
                    }
                </select>
            </div>
            <div class="col-md-6">
                <label class="form-label">Status</label>
                <select name="Status" class="form-select">
                    @foreach (LeadStatus s in Enum.GetValues(typeof(LeadStatus)))
                    {
                        <option value="@s" selected="@(Model.Lead?.Status == s)">@s</option>
                    }
                </select>
            </div>
            <div class="col-md-6">
                <label class="form-label">Rating</label>
                <select name="Rating" class="form-select">
                    @foreach (LeadRating r in Enum.GetValues(typeof(LeadRating)))
                    {
                        <option value="@r" selected="@(Model.Lead?.Rating == r)">@r</option>
                    }
                </select>
            </div>
            <div class="col-md-6">
                <label class="form-label">Estimated Value</label>
                <input type="number" step="0.01" name="EstimatedValue" class="form-control" value="@Model.Lead?.EstimatedValue" />
            </div>
            <div class="col-md-6">
                <label class="form-label">Website</label>
                <input type="url" name="Website" class="form-control" value="@Model.Lead?.Website" />
            </div>
            <div class="col-md-6">
                <label class="form-label">Next Follow-up</label>
                <input type="date" name="NextFollowUpDate" class="form-control" value="@Model.Lead?.NextFollowUpDate?.ToString("yyyy-MM-dd")" />
            </div>
            <div class="col-12">
                <label class="form-label">Notes</label>
                <textarea name="Notes" class="form-control" rows="2">@Model.Lead?.Notes</textarea>
            </div>
            <div class="col-12">
                <label class="form-label">Tags</label>
                <input type="text" name="Tags" class="form-control" value="@Model.Lead?.Tags" placeholder="Comma-separated tags" />
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-modal-hide="leadModal">Cancel</button>
        <button type="submit" class="btn btn-primary">@(Model.IsEdit ? "Update" : "Create") Lead</button>
    </div>
</form>
