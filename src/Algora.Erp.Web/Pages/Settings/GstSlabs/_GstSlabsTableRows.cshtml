@model List<Algora.Erp.Domain.Entities.Settings.GstSlab>

@if (!Model.Any())
{
    <tr>
        <td colspan="8" class="text-center py-5">
            <div class="text-gray-500">
                <i class="bi bi-percent text-4xl block mb-2"></i>
                <p class="mb-0">No GST slabs configured</p>
            </div>
        </td>
    </tr>
}
else
{
    @foreach (var slab in Model)
    {
        <tr class="border-b hover:bg-gray-50">
            <td class="px-6 py-4">
                <span class="font-semibold">@slab.Name</span>
                @if (slab.IsDefault)
                {
                    <span class="text-xs font-medium px-2.5 py-0.5 rounded-full bg-primary-100 text-primary-800 ml-1">Default</span>
                }
            </td>
            <td class="px-6 py-4 text-center">
                <span class="text-xs font-medium px-2.5 py-0.5 rounded-full bg-gray-800 text-white">@slab.Rate%</span>
            </td>
            <td class="px-6 py-4 text-center">
                <span class="text-emerald-600">@slab.CgstRate%</span>
            </td>
            <td class="px-6 py-4 text-center">
                <span class="text-cyan-600">@slab.SgstRate%</span>
            </td>
            <td class="px-6 py-4 text-center">
                <span class="text-amber-600">@slab.IgstRate%</span>
            </td>
            <td class="px-6 py-4">
                @if (!string.IsNullOrEmpty(slab.HsnCodes))
                {
                    <span class="truncate inline-block max-w-[150px]" title="@slab.HsnCodes">
                        @slab.HsnCodes
                    </span>
                }
                else
                {
                    <span class="text-gray-500">-</span>
                }
            </td>
            <td class="px-6 py-4">
                @if (slab.IsActive)
                {
                    <span class="text-xs font-medium px-2.5 py-0.5 rounded-full bg-emerald-100 text-emerald-800">Active</span>
                }
                else
                {
                    <span class="text-xs font-medium px-2.5 py-0.5 rounded-full bg-gray-100 text-gray-800">Inactive</span>
                }
            </td>
            <td class="px-6 py-4 text-right">
                <div class="relative inline-block">
                    <button class="text-gray-500 hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 font-medium rounded-lg text-xs px-3 py-2" id="dropdownGst@(slab.Id)" data-dropdown-toggle="dropdownMenuGst@(slab.Id)" data-dropdown-placement="bottom-end">
                        <i class="bi bi-three-dots-vertical"></i>
                    </button>
                    <div class="z-50 hidden absolute right-0 mt-2 bg-white divide-y divide-gray-100 rounded-lg shadow w-44" id="dropdownMenuGst@(slab.Id)">
                        <ul class="py-2 text-sm text-gray-700">
                            <li>
                                <a class="block px-4 py-2 hover:bg-gray-100 cursor-pointer"
                                   onclick='editSlab(@Html.Raw(System.Text.Json.JsonSerializer.Serialize(new {
                                       id = slab.Id,
                                       name = slab.Name,
                                       rate = slab.Rate,
                                       cgstRate = slab.CgstRate,
                                       sgstRate = slab.SgstRate,
                                       igstRate = slab.IgstRate,
                                       hsnCodes = slab.HsnCodes,
                                       displayOrder = slab.DisplayOrder,
                                       isDefault = slab.IsDefault,
                                       isActive = slab.IsActive
                                   })))'>
                                    <i class="bi bi-pencil mr-2"></i> Edit
                                </a>
                            </li>
                            <li>
                                <hr class="my-1 border-gray-200">
                            </li>
                            <li>
                                <a class="block px-4 py-2 hover:bg-gray-100 text-red-600 cursor-pointer"
                                   hx-delete="?handler=&id=@slab.Id"
                                   hx-target="#gstSlabsTableBody"
                                   hx-confirm="Delete @slab.Name?">
                                    <i class="bi bi-trash mr-2"></i> Delete
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </td>
        </tr>
    }
}
