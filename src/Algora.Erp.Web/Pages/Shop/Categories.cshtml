@page
@model Algora.Erp.Web.Pages.Shop.CategoriesModel
@{
    ViewData["Title"] = "Categories";
    Layout = "_LayoutShop";
}

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <h1 class="text-2xl font-bold text-gray-900 mb-2">Shop by Category</h1>
    <p class="text-gray-500 mb-8">Browse our wide selection of products organized by category.</p>

    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
        @foreach (var category in Model.Categories)
        {
            var productCount = Model.ProductCounts.ContainsKey(category.Id) ? Model.ProductCounts[category.Id] : 0;
            <a href="/Shop?category=@category.Slug" class="group">
                <div class="bg-white rounded-2xl shadow-sm hover:shadow-lg transition-all duration-300 hover:-translate-y-1 h-full">
                    <div class="text-center p-6">
                        <div class="w-20 h-20 mx-auto mb-4 rounded-full bg-gradient-to-br from-primary-600 to-primary-500 flex items-center justify-center">
                            <i class="bi @GetCategoryIcon(category.Name) text-3xl text-white"></i>
                        </div>
                        <h5 class="font-semibold text-gray-900 mb-1 group-hover:text-primary-600 transition-colors">@category.Name</h5>
                        <p class="text-gray-500 text-sm">@productCount products</p>
                    </div>
                </div>
            </a>
        }
    </div>

    @if (!Model.Categories.Any())
    {
        <div class="text-center py-16">
            <i class="bi bi-tags text-6xl text-gray-300 block mb-3"></i>
            <h5 class="text-lg font-semibold text-gray-700 mb-2">No categories available</h5>
            <p class="text-gray-500">Check back soon for our product categories.</p>
        </div>
    }
</div>

@functions {
    string GetCategoryIcon(string categoryName)
    {
        return categoryName.ToLower() switch
        {
            var n when n.Contains("electronic") => "bi-laptop",
            var n when n.Contains("clothing") || n.Contains("fashion") => "bi-bag",
            var n when n.Contains("home") || n.Contains("garden") => "bi-house",
            var n when n.Contains("sport") => "bi-bicycle",
            var n when n.Contains("book") => "bi-book",
            var n when n.Contains("toy") => "bi-controller",
            var n when n.Contains("phone") || n.Contains("mobile") => "bi-phone",
            var n when n.Contains("laptop") || n.Contains("computer") => "bi-laptop",
            var n when n.Contains("accessory") || n.Contains("accessories") => "bi-watch",
            var n when n.Contains("men") => "bi-person",
            var n when n.Contains("women") => "bi-person-dress",
            _ => "bi-box"
        };
    }
}
