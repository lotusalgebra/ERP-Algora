@page
@model Algora.Erp.Web.Pages.Admin.Settings.IndexModel
@{
    ViewData["Title"] = "Settings";
}

<div class="container-fluid">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h1 class="h3 mb-0">System Settings</h1>
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb mb-0">
                    <li class="breadcrumb-item"><a href="/">Dashboard</a></li>
                    <li class="breadcrumb-item"><a href="/Admin">Admin</a></li>
                    <li class="breadcrumb-item active">Settings</li>
                </ol>
            </nav>
        </div>
    </div>

    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            <i class="bi bi-check-circle me-2"></i>@TempData["SuccessMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }

    @if (TempData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            <i class="bi bi-exclamation-circle me-2"></i>@TempData["ErrorMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }

    <div class="row">
        <!-- Settings Navigation -->
        <div class="col-md-3 mb-4">
            <div class="card border-0 shadow-sm">
                <div class="card-body p-0">
                    <div class="nav flex-column nav-pills" id="settingsTabs" role="tablist">
                        <button class="nav-link active text-start rounded-0 border-bottom" id="general-tab" data-bs-toggle="pill" data-bs-target="#general" type="button">
                            <i class="bi bi-building me-2"></i>General & Company
                        </button>
                        <button class="nav-link text-start rounded-0 border-bottom" id="currency-tab" data-bs-toggle="pill" data-bs-target="#currency" type="button">
                            <i class="bi bi-currency-exchange me-2"></i>Currency
                        </button>
                        <button class="nav-link text-start rounded-0 border-bottom" id="tax-tab" data-bs-toggle="pill" data-bs-target="#tax" type="button">
                            <i class="bi bi-percent me-2"></i>Tax Settings
                        </button>
                        <button class="nav-link text-start rounded-0 border-bottom" id="invoice-tab" data-bs-toggle="pill" data-bs-target="#invoice" type="button">
                            <i class="bi bi-receipt me-2"></i>Invoice Settings
                        </button>
                        <button class="nav-link text-start rounded-0 border-bottom" id="email-tab" data-bs-toggle="pill" data-bs-target="#email" type="button">
                            <i class="bi bi-envelope me-2"></i>Email (SMTP)
                        </button>
                        <button class="nav-link text-start rounded-0 border-bottom" id="security-tab" data-bs-toggle="pill" data-bs-target="#security" type="button">
                            <i class="bi bi-shield-lock me-2"></i>Security
                        </button>
                        <button class="nav-link text-start rounded-0" id="about-tab" data-bs-toggle="pill" data-bs-target="#about" type="button">
                            <i class="bi bi-info-circle me-2"></i>About
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Content -->
        <div class="col-md-9">
            <div class="tab-content" id="settingsTabContent">
                <!-- General & Company Settings -->
                <div class="tab-pane fade show active" id="general" role="tabpanel">
                    <div class="card border-0 shadow-sm">
                        <div class="card-header bg-white">
                            <h5 class="mb-0"><i class="bi bi-building me-2"></i>General & Company Settings</h5>
                        </div>
                        <div class="card-body">
                            <form method="post" asp-page-handler="General">
                                <h6 class="text-muted mb-3">Company Information</h6>
                                <div class="row g-3 mb-4">
                                    <div class="col-md-6">
                                        <label class="form-label">Company Name <span class="text-danger">*</span></label>
                                        <input type="text" class="form-control" asp-for="Settings.CompanyName" required />
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Company Tagline</label>
                                        <input type="text" class="form-control" asp-for="Settings.CompanyTagline" placeholder="Your business tagline" />
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Website</label>
                                        <input type="url" class="form-control" asp-for="Settings.CompanyWebsite" placeholder="https://www.example.com" />
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Email</label>
                                        <input type="email" class="form-control" asp-for="Settings.CompanyEmail" placeholder="contact@example.com" />
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Phone</label>
                                        <input type="tel" class="form-control" asp-for="Settings.CompanyPhone" placeholder="+91 9876543210" />
                                    </div>
                                </div>

                                <h6 class="text-muted mb-3">Address</h6>
                                <div class="row g-3 mb-4">
                                    <div class="col-md-6">
                                        <label class="form-label">Address Line 1</label>
                                        <input type="text" class="form-control" asp-for="Settings.AddressLine1" />
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Address Line 2</label>
                                        <input type="text" class="form-control" asp-for="Settings.AddressLine2" />
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label">City</label>
                                        <input type="text" class="form-control" asp-for="Settings.City" />
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label">State/Province</label>
                                        <input type="text" class="form-control" asp-for="Settings.State" />
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label">Postal Code</label>
                                        <input type="text" class="form-control" asp-for="Settings.PostalCode" />
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Country</label>
                                        <select class="form-select" asp-for="Settings.Country" id="countrySelect">
                                            @foreach (var country in Model.CountryOptions)
                                            {
                                                var isSelected = Model.Settings.Country == country.Name;
                                                if (isSelected)
                                                {
                                                    <option value="@country.Name" data-code="@country.Code" selected>@country.Name</option>
                                                }
                                                else
                                                {
                                                    <option value="@country.Name" data-code="@country.Code">@country.Name</option>
                                                }
                                            }
                                        </select>
                                        <input type="hidden" asp-for="Settings.CountryCode" id="countryCodeInput" />
                                    </div>
                                </div>

                                <h6 class="text-muted mb-3">Regional Settings</h6>
                                <div class="row g-3">
                                    <div class="col-md-4">
                                        <label class="form-label">Time Zone</label>
                                        <select class="form-select" asp-for="Settings.TimeZone">
                                            @foreach (var tz in Model.TimezoneOptions)
                                            {
                                                var isSelected = Model.Settings.TimeZone == tz.Id;
                                                if (isSelected)
                                                {
                                                    <option value="@tz.Id" selected>@tz.DisplayName</option>
                                                }
                                                else
                                                {
                                                    <option value="@tz.Id">@tz.DisplayName</option>
                                                }
                                            }
                                        </select>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label">Date Format</label>
                                        <select class="form-select" asp-for="Settings.DateFormat">
                                            @foreach (var df in Model.DateFormatOptions)
                                            {
                                                var isSelected = Model.Settings.DateFormat == df.Format;
                                                if (isSelected)
                                                {
                                                    <option value="@df.Format" selected>@df.Example</option>
                                                }
                                                else
                                                {
                                                    <option value="@df.Format">@df.Example</option>
                                                }
                                            }
                                        </select>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label">Language</label>
                                        <select class="form-select" asp-for="Settings.Language">
                                            @foreach (var lang in Model.LanguageOptions)
                                            {
                                                var isSelected = Model.Settings.Language == lang.Code;
                                                if (isSelected)
                                                {
                                                    <option value="@lang.Code" selected>@lang.Name</option>
                                                }
                                                else
                                                {
                                                    <option value="@lang.Code">@lang.Name</option>
                                                }
                                            }
                                        </select>
                                    </div>
                                </div>

                                <div class="mt-4">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="bi bi-check-lg me-1"></i>Save General Settings
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Currency Settings -->
                <div class="tab-pane fade" id="currency" role="tabpanel">
                    <div class="card border-0 shadow-sm">
                        <div class="card-header bg-white">
                            <h5 class="mb-0"><i class="bi bi-currency-exchange me-2"></i>Currency Settings</h5>
                        </div>
                        <div class="card-body">
                            <form method="post" asp-page-handler="Currency">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label class="form-label">Currency <span class="text-danger">*</span></label>
                                        <select class="form-select form-select-lg" asp-for="Settings.Currency" id="currencySelect">
                                            @foreach (var curr in Model.CurrencyOptions)
                                            {
                                                var isSelected = Model.Settings.Currency == curr.Code;
                                                if (isSelected)
                                                {
                                                    <option value="@curr.Code" data-symbol="@curr.Symbol" data-name="@curr.Name" selected>@curr.Code - @curr.Symbol @curr.Name</option>
                                                }
                                                else
                                                {
                                                    <option value="@curr.Code" data-symbol="@curr.Symbol" data-name="@curr.Name">@curr.Code - @curr.Symbol @curr.Name</option>
                                                }
                                            }
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label">Symbol Preview</label>
                                        <div class="d-flex align-items-center h-100">
                                            <span id="currencySymbolPreview" class="badge bg-primary fs-3 px-4 py-2">@Model.Settings.CurrencySymbol</span>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <label class="form-label">Decimal Places</label>
                                        <select class="form-select form-select-lg" asp-for="Settings.CurrencyDecimalPlaces">
                                            @{
                                                var dp = Model.Settings.CurrencyDecimalPlaces;
                                            }
                                            @if (dp == 0)
                                            {
                                                <option value="0" selected>0 (e.g., 1,234)</option>
                                            }
                                            else
                                            {
                                                <option value="0">0 (e.g., 1,234)</option>
                                            }
                                            @if (dp == 2)
                                            {
                                                <option value="2" selected>2 (e.g., 1,234.56)</option>
                                            }
                                            else
                                            {
                                                <option value="2">2 (e.g., 1,234.56)</option>
                                            }
                                            @if (dp == 3)
                                            {
                                                <option value="3" selected>3 (e.g., 1,234.567)</option>
                                            }
                                            else
                                            {
                                                <option value="3">3 (e.g., 1,234.567)</option>
                                            }
                                        </select>
                                    </div>
                                </div>

                                <div class="alert alert-info mt-4" id="currencyInfoAlert">
                                    <i class="bi bi-info-circle me-2"></i>
                                    <strong>Selected Currency:</strong> <span id="currencyInfoSymbol">@Model.Settings.CurrencySymbol</span> <span id="currencyInfoName">@Model.Settings.CurrencyName</span> (<span id="currencyInfoCode">@Model.Settings.Currency</span>)
                                    <br /><small>Currency changes will affect all new invoices and financial documents.</small>
                                </div>

                                <div class="mt-4">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="bi bi-check-lg me-1"></i>Save Currency Settings
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Tax Settings -->
                <div class="tab-pane fade" id="tax" role="tabpanel">
                    <div class="card border-0 shadow-sm">
                        <div class="card-header bg-white">
                            <h5 class="mb-0"><i class="bi bi-percent me-2"></i>Tax Settings</h5>
                        </div>
                        <div class="card-body">
                            <form method="post" asp-page-handler="Tax">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label class="form-label">Tax ID Label</label>
                                        <input type="text" class="form-control" asp-for="Settings.TaxIdLabel" placeholder="e.g., GSTIN, VAT, TIN" />
                                        <small class="text-muted">The label shown on invoices (e.g., GSTIN for India, VAT for EU)</small>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">@(Model.Settings.TaxIdLabel ?? "Tax ID")</label>
                                        <input type="text" class="form-control" asp-for="Settings.TaxId" placeholder="Enter your tax identification number" />
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">PAN Number</label>
                                        <input type="text" class="form-control" asp-for="Settings.PanNumber" placeholder="AAAPA1234A" maxlength="10" />
                                        <small class="text-muted">Required for India GST registration</small>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check mt-4">
                                            <input type="checkbox" class="form-check-input" asp-for="Settings.IsGstRegistered" />
                                            <label class="form-check-label" asp-for="Settings.IsGstRegistered">
                                                <strong>GST Registered</strong>
                                            </label>
                                            <small class="text-muted d-block">Enable GST calculations (CGST/SGST for intra-state, IGST for inter-state)</small>
                                        </div>
                                    </div>
                                </div>

                                <div class="mt-4">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="bi bi-check-lg me-1"></i>Save Tax Settings
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Invoice Settings -->
                <div class="tab-pane fade" id="invoice" role="tabpanel">
                    <div class="card border-0 shadow-sm">
                        <div class="card-header bg-white">
                            <h5 class="mb-0"><i class="bi bi-receipt me-2"></i>Invoice Settings</h5>
                        </div>
                        <div class="card-body">
                            <form method="post" asp-page-handler="Invoice">
                                <h6 class="text-muted mb-3">Document Prefixes</h6>
                                <div class="row g-3 mb-4">
                                    <div class="col-md-4">
                                        <label class="form-label">Invoice Prefix</label>
                                        <input type="text" class="form-control" asp-for="Settings.InvoicePrefix" maxlength="10" />
                                        <small class="text-muted">e.g., INV -> INV-2026-0001</small>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label">Quotation Prefix</label>
                                        <input type="text" class="form-control" asp-for="Settings.QuotationPrefix" maxlength="10" />
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label">Sales Order Prefix</label>
                                        <input type="text" class="form-control" asp-for="Settings.SalesOrderPrefix" maxlength="10" />
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label">Purchase Order Prefix</label>
                                        <input type="text" class="form-control" asp-for="Settings.PurchaseOrderPrefix" maxlength="10" />
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label">Delivery Challan Prefix</label>
                                        <input type="text" class="form-control" asp-for="Settings.DeliveryChallanPrefix" maxlength="10" />
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label">Goods Receipt Prefix</label>
                                        <input type="text" class="form-control" asp-for="Settings.GoodsReceiptPrefix" maxlength="10" />
                                    </div>
                                </div>

                                <h6 class="text-muted mb-3">Payment Terms</h6>
                                <div class="row g-3 mb-4">
                                    <div class="col-md-4">
                                        <label class="form-label">Default Payment Term (Days)</label>
                                        <input type="number" class="form-control" asp-for="Settings.DefaultPaymentTermDays" min="0" max="365" />
                                    </div>
                                    <div class="col-md-8">
                                        <label class="form-label">Payment Terms Text</label>
                                        <input type="text" class="form-control" asp-for="Settings.DefaultPaymentTerms" placeholder="e.g., Net 30, Due on Receipt" />
                                    </div>
                                </div>

                                <h6 class="text-muted mb-3">Invoice PDF Settings</h6>
                                <div class="row g-3 mb-4">
                                    <div class="col-md-12">
                                        <label class="form-label">Invoice Header Text</label>
                                        <input type="text" class="form-control" asp-for="Settings.InvoiceHeaderText" placeholder="Tax Invoice" />
                                    </div>
                                    <div class="col-md-12">
                                        <label class="form-label">Invoice Footer Text</label>
                                        <input type="text" class="form-control" asp-for="Settings.InvoiceFooterText" placeholder="Thank you for your business!" />
                                    </div>
                                    <div class="col-md-12">
                                        <label class="form-label">Terms and Conditions</label>
                                        <textarea class="form-control" asp-for="Settings.InvoiceTermsText" rows="3" placeholder="Enter default invoice terms and conditions..."></textarea>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check">
                                            <input type="checkbox" class="form-check-input" asp-for="Settings.ShowGstBreakdown" />
                                            <label class="form-check-label" asp-for="Settings.ShowGstBreakdown">
                                                Show GST Breakdown (CGST/SGST/IGST)
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check">
                                            <input type="checkbox" class="form-check-input" asp-for="Settings.ShowHsnCode" />
                                            <label class="form-check-label" asp-for="Settings.ShowHsnCode">
                                                Show HSN/SAC Code on Invoice
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <div class="mt-4">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="bi bi-check-lg me-1"></i>Save Invoice Settings
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Email Settings -->
                <div class="tab-pane fade" id="email" role="tabpanel">
                    <div class="card border-0 shadow-sm">
                        <div class="card-header bg-white">
                            <h5 class="mb-0"><i class="bi bi-envelope me-2"></i>Email (SMTP) Settings</h5>
                        </div>
                        <div class="card-body">
                            <form method="post" asp-page-handler="Email">
                                <div class="row g-3">
                                    <div class="col-md-8">
                                        <label class="form-label">SMTP Host</label>
                                        <input type="text" class="form-control" asp-for="Settings.SmtpHost" placeholder="smtp.gmail.com" />
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label">SMTP Port</label>
                                        <input type="number" class="form-control" asp-for="Settings.SmtpPort" />
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">SMTP Username</label>
                                        <input type="text" class="form-control" asp-for="Settings.SmtpUsername" placeholder="your-email@gmail.com" />
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">SMTP Password</label>
                                        <input type="password" class="form-control" asp-for="Settings.SmtpPassword" placeholder="Enter to change password" />
                                        <small class="text-muted">Leave blank to keep existing password</small>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">From Email Address</label>
                                        <input type="email" class="form-control" asp-for="Settings.EmailFromAddress" placeholder="noreply@yourcompany.com" />
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">From Name</label>
                                        <input type="text" class="form-control" asp-for="Settings.EmailFromName" placeholder="Your Company Name" />
                                    </div>
                                    <div class="col-12">
                                        <div class="form-check">
                                            <input type="checkbox" class="form-check-input" asp-for="Settings.SmtpEnableSsl" />
                                            <label class="form-check-label" asp-for="Settings.SmtpEnableSsl">Enable SSL/TLS</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="mt-4 d-flex gap-2">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="bi bi-check-lg me-1"></i>Save Email Settings
                                    </button>
                                    <button type="submit" asp-page-handler="TestEmail" class="btn btn-outline-secondary">
                                        <i class="bi bi-send me-1"></i>Send Test Email
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Security Settings -->
                <div class="tab-pane fade" id="security" role="tabpanel">
                    <div class="card border-0 shadow-sm">
                        <div class="card-header bg-white">
                            <h5 class="mb-0"><i class="bi bi-shield-lock me-2"></i>Security Settings</h5>
                        </div>
                        <div class="card-body">
                            <form method="post" asp-page-handler="Security">
                                <h6 class="text-muted mb-3">Password Policy</h6>
                                <div class="row g-3 mb-4">
                                    <div class="col-md-4">
                                        <label class="form-label">Minimum Password Length</label>
                                        <input type="number" class="form-control" asp-for="Settings.PasswordMinLength" min="6" max="32" />
                                    </div>
                                    <div class="col-md-8">
                                        <label class="form-label">Password Requirements</label>
                                        <div class="d-flex flex-wrap gap-3">
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" asp-for="Settings.PasswordRequireUppercase" />
                                                <label class="form-check-label">Uppercase (A-Z)</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" asp-for="Settings.PasswordRequireLowercase" />
                                                <label class="form-check-label">Lowercase (a-z)</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" asp-for="Settings.PasswordRequireDigit" />
                                                <label class="form-check-label">Digit (0-9)</label>
                                            </div>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" asp-for="Settings.PasswordRequireSpecialChar" />
                                                <label class="form-check-label">Special (!&#64;#$)</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <h6 class="text-muted mb-3">Session and Lockout</h6>
                                <div class="row g-3 mb-4">
                                    <div class="col-md-4">
                                        <label class="form-label">Session Timeout (minutes)</label>
                                        <input type="number" class="form-control" asp-for="Settings.SessionTimeoutMinutes" min="5" max="480" />
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label">Max Login Attempts</label>
                                        <input type="number" class="form-control" asp-for="Settings.MaxLoginAttempts" min="3" max="10" />
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label">Lockout Duration (minutes)</label>
                                        <input type="number" class="form-control" asp-for="Settings.LockoutDurationMinutes" min="5" max="60" />
                                    </div>
                                </div>

                                <h6 class="text-muted mb-3">Two-Factor Authentication</h6>
                                <div class="form-check mb-3">
                                    <input type="checkbox" class="form-check-input" asp-for="Settings.EnableTwoFactor" />
                                    <label class="form-check-label" asp-for="Settings.EnableTwoFactor">
                                        <strong>Enable Two-Factor Authentication</strong>
                                    </label>
                                    <small class="text-muted d-block">Users will be required to set up 2FA on next login</small>
                                </div>

                                <div class="mt-4">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="bi bi-check-lg me-1"></i>Save Security Settings
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- About -->
                <div class="tab-pane fade" id="about" role="tabpanel">
                    <div class="card border-0 shadow-sm">
                        <div class="card-header bg-white">
                            <h5 class="mb-0"><i class="bi bi-info-circle me-2"></i>About</h5>
                        </div>
                        <div class="card-body">
                            <div class="text-center py-4">
                                <h2 class="text-primary mb-1">Algora ERP</h2>
                                <p class="text-muted">Enterprise Resource Planning System</p>
                                <span class="badge bg-primary fs-6 mb-4">Version 1.0.0</span>
                            </div>

                            <div class="row g-3">
                                <div class="col-md-6">
                                    <div class="card bg-light border-0">
                                        <div class="card-body">
                                            <h6><i class="bi bi-cpu me-2"></i>System Information</h6>
                                            <table class="table table-sm table-borderless mb-0">
                                                <tr>
                                                    <td class="text-muted">.NET Version</td>
                                                    <td>8.0</td>
                                                </tr>
                                                <tr>
                                                    <td class="text-muted">Database</td>
                                                    <td>SQL Server</td>
                                                </tr>
                                                <tr>
                                                    <td class="text-muted">Server OS</td>
                                                    <td>@Environment.OSVersion</td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="card bg-light border-0">
                                        <div class="card-body">
                                            <h6><i class="bi bi-gear me-2"></i>Current Settings</h6>
                                            <table class="table table-sm table-borderless mb-0">
                                                <tr>
                                                    <td class="text-muted">Currency</td>
                                                    <td>@Model.Settings.CurrencySymbol @Model.Settings.Currency</td>
                                                </tr>
                                                <tr>
                                                    <td class="text-muted">Country</td>
                                                    <td>@Model.Settings.Country</td>
                                                </tr>
                                                <tr>
                                                    <td class="text-muted">Time Zone</td>
                                                    <td>@Model.Settings.TimeZone</td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <hr class="my-4" />

                            <div class="text-center text-muted">
                                <p class="mb-1">2024-2026 Algora. All rights reserved.</p>
                                <p class="small mb-0">
                                    <a href="#" class="text-muted">Documentation</a> |
                                    <a href="#" class="text-muted">Support</a> |
                                    <a href="#" class="text-muted">Privacy Policy</a>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Update country code when country changes
        document.getElementById('countrySelect')?.addEventListener('change', function() {
            const selectedOption = this.options[this.selectedIndex];
            document.getElementById('countryCodeInput').value = selectedOption.dataset.code;
        });

        // Update currency display when currency changes
        document.getElementById('currencySelect')?.addEventListener('change', function() {
            const selectedOption = this.options[this.selectedIndex];
            const symbol = selectedOption.dataset.symbol;
            const name = selectedOption.dataset.name;
            const code = selectedOption.value;

            // Update the symbol preview badge
            document.getElementById('currencySymbolPreview').textContent = symbol;

            // Update the info alert
            document.getElementById('currencyInfoSymbol').textContent = symbol;
            document.getElementById('currencyInfoName').textContent = name;
            document.getElementById('currencyInfoCode').textContent = code;
        });
    </script>
}
